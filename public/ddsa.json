{
  "meta": {
    "enact": {
      "ui": {
        "cols": [
          {
            "width": 6,
            "contents": [
              {
                "component": "fixed",
                "path": "shortness_of_breath:questions"
              }
            ]
          },
          {
            "width": 6,
            "contents": [
              {
                "component": "settings"
              },
              {
                "component": "fixed",
                "path": "shortness_of_breath:diagnosis"
              }
            ]
          }
        ]
      },
      "template": "custom"
    },
    "svg": {
      "width": 800,
      "height": 400
    }
  },
  "caption": "Shortness of breath",
  "description": "Preliminary diagnosis for patients who arrive in A&E with shortness of breath",
  "name": "shortness_of_breath",
  "autonomous": true,
  "dataDefinitions": [
    {
      "caption": "Wheeze?",
      "description": "Does the patient have a wheeze?",
      "name": "Wheeze",
      "range": [
        "no",
        "yes"
      ],
      "defaultValue": "no",
      "class": "Text"
    },
    {
      "caption": "Hx Asthma?",
      "description": "Does the patient have a history of Asthma?",
      "name": "Hx_asthma",
      "range": [
        "no",
        "yes"
      ],
      "defaultValue": "no",
      "class": "Text"
    },
    {
      "caption": "Basal Crackles?",
      "description": "Does the patient demonstrate Basal Crackles?",
      "name": "basal_crackles",
      "range": [
        "no",
        "yes"
      ],
      "defaultValue": "no",
      "class": "Text"
    },
    {
      "caption": "Infected Sputum?",
      "description": "Does the patient have infected sputum?",
      "name": "infected_sputum",
      "range": [
        "no",
        "yes"
      ],
      "defaultValue": "no",
      "class": "Text"
    },
    {
      "caption": "Hx IHD?",
      "description": "Does the patient have a history of Ischaemic Heart Disease (IHD)?",
      "name": "Hx_IHD",
      "range": [
        "no",
        "yes"
      ],
      "defaultValue": "no",
      "class": "Text"
    },
    {
      "caption": "Raised WBC",
      "description": "Does the patient have a raised White Blood Count?",
      "name": "Raised_WBC",
      "range": [
        "no",
        "yes"
      ],
      "defaultValue": "no",
      "class": "Text"
    },
    {
      "caption": "Slow onset?",
      "description": "Has the patient's current condition developed slowly?",
      "name": "slow_onset",
      "range": [
        "no",
        "yes"
      ],
      "defaultValue": "no",
      "class": "Text"
    },
    {
      "caption": "CXR findings",
      "description": "What are the chest X-Ray findings?",
      "name": "CXR_findings",
      "range": [
        "Diffuse shadowing",
        "Hyper Expansion",
        "Lobar Consolidation"
      ],
      "defaultValue": [],
      "multiValued": true,
      "class": "Text"
    },
    {
      "caption": "Normal Oxygen levels?",
      "description": "Are the current oxygen levels normal?",
      "name": "oxygen_level",
      "range": [
        "no",
        "yes"
      ],
      "defaultValue": "no",
      "class": "Text"
    },
    {
      "caption": "Patient's Age",
      "description": "What is the patient's age?",
      "name": "age",
      "class": "Integer"
    }
  ],
  "tasks": [
    {
      "meta": {
        "pos": {
          "x": 113.53933862627972,
          "y": 122.3057980847737
        }
      },
      "caption": "Questions",
      "name": "questions",
      "autonomous": true,
      "tasks": [
        {
          "meta": {
            "pos": {
              "x": 78.67978528824928,
              "y": 86.33642598144226
            },
            "ui": {
              "sources": {
                "showDescriptionInline": true,
                "hideEraser": true
              },
              "showComplete": false
            }
          },
          "caption": "Patient",
          "name": "patient",
          "sources": [
            {
              "type": "age",
              "class": "Source"
            },
            {
              "type": "Hx_asthma",
              "class": "Source"
            },
            {
              "type": "Hx_IHD",
              "class": "Source"
            }
          ],
          "class": "Enquiry"
        },
        {
          "meta": {
            "pos": {
              "x": 197.33147894564235,
              "y": 87.26339233814062
            },
            "ui": {
              "sources": {
                "showDescriptionInline": true,
                "hideEraser": true
              },
              "showComplete": false
            }
          },
          "caption": "Symptoms",
          "name": "symptoms",
          "sources": [
            {
              "type": "basal_crackles",
              "class": "Source"
            },
            {
              "type": "Wheeze",
              "class": "Source"
            },
            {
              "type": "slow_onset",
              "class": "Source"
            }
          ],
          "class": "Enquiry"
        },
        {
          "meta": {
            "pos": {
              "x": 415.1685727697621,
              "y": 84.48249326804552
            },
            "ui": {
              "sources": {
                "showDescriptionInline": true,
                "hideEraser": true
              },
              "showComplete": false
            }
          },
          "caption": "Findings",
          "name": "findings",
          "sources": [
            {
              "type": "CXR_findings",
              "class": "Source"
            },
            {
              "type": "infected_sputum",
              "class": "Source"
            },
            {
              "type": "Raised_WBC",
              "class": "Source"
            },
            {
              "type": "oxygen_level",
              "class": "Source"
            }
          ],
          "class": "Enquiry"
        }
      ],
      "class": "Plan"
    },
    {
      "meta": {
        "pos": {
          "x": 350,
          "y": 120
        }
      },
      "caption": "Diagnosis",
      "description": "A preliminary diagnosis",
      "name": "diagnosis",
      "candidates": [
        {
          "caption": "Suspected Heart Failure",
          "name": "heart_failure",
          "recommendCondition": "net_support('heart_failure') >= 1 && net_support('heart_failure')>=net_support('pneumonia') && net_support('heart_failure')>=net_support('asthma')",
          "arguments": [
            {
              "caption": "A history of Ischemic heart disease indicates heart failure",
              "support": 2,
              "activeCondition": "Hx_IHD == \"yes\"",
              "class": "Argument"
            },
            {
              "caption": "Some patients with heart failure present with a wheeze",
              "support": 1,
              "activeCondition": "Wheeze == \"yes\"",
              "class": "Argument"
            },
            {
              "caption": "Diffuse shadowing in a chest X-Ray is strongly indicative of heart failure",
              "support": 4,
              "activeCondition": "includes(CXR_findings, 'Diffuse shadowing')",
              "class": "Argument"
            },
            {
              "caption": "Heart failure is less prevalent in younger patients (under 50s)",
              "support": -2,
              "activeCondition": "age < 50",
              "class": "Argument"
            },
            {
              "caption": "Heart failure is more prevalent in older patients (over 50s)",
              "support": 2,
              "activeCondition": "age >= 50",
              "class": "Argument"
            },
            {
              "caption": "A slow onset of the patient's condition suggests Pneumonia or Heart failure, not Asthma",
              "support": 2,
              "activeCondition": "slow_onset == \"yes\"",
              "class": "Argument"
            },
            {
              "caption": "Basal Cackles are strongly indicative of heart failure",
              "support": 4,
              "activeCondition": "basal_crackles == \"yes\"",
              "class": "Argument"
            },
            {
              "caption": "Normal Oxygen levels strongly contraindicate heart failure",
              "support": -4,
              "activeCondition": "oxygen_level == \"yes\"",
              "class": "Argument"
            }
          ],
          "class": "Candidate"
        },
        {
          "caption": "Suspected Pneumonia",
          "name": "pneumonia",
          "recommendCondition": "net_support('pneumonia') >= 1 && net_support('pneumonia') >= net_support('heart_failure') && net_support('pneumonia') >= net_support('asthma')",
          "arguments": [
            {
              "caption": "Normal oxygen levels strongly contra-indicate pneumonia",
              "support": -4,
              "activeCondition": "oxygen_level == \"yes\"",
              "class": "Argument"
            },
            {
              "caption": "Raised WBC is a symptom of pneumonia",
              "support": 2,
              "activeCondition": "Raised_WBC == \"yes\"",
              "class": "Argument"
            },
            {
              "caption": "Lobar consolidation means a diagnosis of pneumonia",
              "support": 8,
              "activeCondition": "includes(CXR_findings, 'Lobar Consolidation')",
              "class": "Argument"
            },
            {
              "caption": "Diffuse shadowning suggests pneumonia",
              "support": 2,
              "activeCondition": "includes(CXR_findings, 'Diffuse shadowing')",
              "class": "Argument"
            },
            {
              "caption": "Infected Sputum is a strong indicator of pneumonia",
              "support": 4,
              "activeCondition": "infected_sputum == \"yes\"",
              "class": "Argument"
            },
            {
              "caption": "A slow onset of the patients condition suggests pneumonia or heart failure - not asthma",
              "support": 2,
              "activeCondition": "slow_onset == \"yes\"",
              "class": "Argument"
            }
          ],
          "class": "Candidate"
        },
        {
          "caption": "Suspected Asthma",
          "name": "asthma",
          "recommendCondition": "net_support('asthma') >= 1 && net_support('asthma')>=net_support('heart_failure') && net_support('asthma') >= net_support('pneumonia')",
          "arguments": [
            {
              "caption": "A wheeze is strongly suggestive of Asthma",
              "support": 4,
              "activeCondition": "Wheeze == \"yes\"",
              "class": "Argument"
            },
            {
              "caption": "Asthma is more prevalent in the young",
              "support": -2,
              "activeCondition": "age >= 40",
              "class": "Argument"
            },
            {
              "caption": "Asthma tends to develop quickly",
              "support": -2,
              "activeCondition": "slow_onset == \"yes\"",
              "class": "Argument"
            },
            {
              "caption": "Basal crackles tend to be associated with heart failiure, not Asthma",
              "support": -2,
              "activeCondition": "basal_crackles == \"yes\"",
              "class": "Argument"
            },
            {
              "caption": "A Chest X-Ray that shows hyper expansion is strongly suggestive of Asthma",
              "support": 4,
              "activeCondition": "includes(CXR_findings, 'Hyper Expansion')",
              "class": "Argument"
            },
            {
              "caption": "Asthma is more prevalent in the young",
              "support": 2,
              "activeCondition": "age < 40",
              "class": "Argument"
            },
            {
              "caption": "A history of Asthma strongly supports the current presentation being Asthma",
              "support": 4,
              "activeCondition": "Hx_asthma == \"yes\"",
              "class": "Argument"
            }
          ],
          "class": "Candidate"
        }
      ],
      "class": "Decision"
    }
  ],
  "class": "Plan"
}
